{"ast":null,"code":"import _classCallCheck from\"C:/Users/strie/Documents/GitHub/uwsynaptech-website/synaptech-page/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/strie/Documents/GitHub/uwsynaptech-website/synaptech-page/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"C:/Users/strie/Documents/GitHub/uwsynaptech-website/synaptech-page/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"C:/Users/strie/Documents/GitHub/uwsynaptech-website/synaptech-page/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/strie/Documents/GitHub/uwsynaptech-website/synaptech-page/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from\"react\";import*as THREE from'three';import{OBJLoader}from'three/examples/jsm/loaders/OBJLoader.js';import'../styles/Styles.css';import{Vector3}from\"three\";import{BloomEffect,EffectComposer,EffectPass,RenderPass}from\"postprocessing\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ThreeDBrainBG=/*#__PURE__*/function(_Component){_inherits(ThreeDBrainBG,_Component);var _super=_createSuper(ThreeDBrainBG);function ThreeDBrainBG(props){var _this;_classCallCheck(this,ThreeDBrainBG);_this=_super.call(this,props);_this.handleWindowResize=function(){_this.setState({width:_this.el.clientWidth,height:_this.el.clientHeight});_this.camera.aspect=_this.state.width/_this.state.height;_this.camera.fov=Math.min(50,360/Math.PI*Math.atan(_this.state.tanFOV*(_this.state.ogWinWidth/_this.state.ogWinHeight)/(_this.el.clientWidth/_this.state.ogWinWidth)));_this.camera.updateProjectionMatrix();_this.renderer.setSize(_this.state.width,_this.state.height);_this.reshapeTex(_this.scene.background,_assertThisInitialized(_this));// console.log(this.props.thresholds);\n};_this.reshapeTex=function(tex,reference){var canvasAspect=reference.camera.aspect;var imageAspect=tex.image?tex.image.width/tex.image.height:1;var aspect=imageAspect/canvasAspect;tex.offset.x=aspect>1?(1-1/aspect)/2:0;tex.repeat.x=aspect>1?1/aspect:1;tex.offset.y=aspect>1?0:(1-aspect)/2;tex.repeat.y=aspect>1?1:aspect;};_this.sceneSetup=function(){// get container dimensions and use them for scene sizing\nvar width=_this.el.clientWidth;var height=_this.el.clientHeight;_this.setState({width:width,height:width});_this.scene=new THREE.Scene();_this.camera=new THREE.PerspectiveCamera(Math.min(50,360/Math.PI*Math.atan(_this.state.tanFOV*(_this.state.ogWinWidth/_this.state.ogWinHeight)/(_this.state.width/_this.state.ogWinWidth))),// fov = field of view\nwidth/height,// aspect ratio\n0.1,// near plane\n10// far plane\n);// default camera position\n_this.camera.z=3;_this.camera.y=1;_this.renderer=new THREE.WebGLRenderer({powerPreference:\"high-performance\",antialias:false,stencil:false,depth:true});_this.renderer.setSize(width,height);_this.composer=new EffectComposer(_this.renderer);_this.composer.addPass(new RenderPass(_this.scene,_this.camera));_this.el.appendChild(_this.renderer.domElement);// mount using React ref\n//Load background texture\nfunction applyTex(tex,reference){reference.reshapeTex(tex,reference);reference.scene.background=tex;};var loader=new THREE.TextureLoader();loader.load('./assets/background_without_logo.png',function(texture){return applyTex(texture,_assertThisInitialized(_this));});_this.raycaster=new THREE.Raycaster();};_this.populateScene=function(){var light=new THREE.AmbientLight(0x0E62AB,2);light.position.set(0,-4,0);_this.scene.add(light);var light2=new THREE.DirectionalLight(0x5599ff,2);light2.position.set(0,2,0);_this.scene.add(light2);var light3=new THREE.DirectionalLight(0x5599ff,2);light3.position.set(2,0,0);_this.scene.add(light3);_this.rayLight=new THREE.PointLight(0xFFFF00,0,0.2,1.5);_this.rayLight.position.set(0,0,0);_this.scene.add(_this.rayLight);// const raySphereGeo = new THREE.SphereBufferGeometry( 1/20, 16, 16 );\n// const raySphereMat = new THREE.MeshBasicMaterial( { color: 0xffffff } );\n// this.raySphere = new THREE.Mesh(raySphereGeo, raySphereMat);\n// this.raySphere.layers.set( 0 );\n// this.raySphere.position.set(0, 0, 0);\n// this.scene.add( this.raySphere );\n_this.composer.addPass(new EffectPass(_this.camera,new BloomEffect({//camera : this.camera,\n//lightSource : this.rayLight.position\n})));//Load brain object file\nvar loader=new OBJLoader();//Create material for object\nvar testMat=new THREE.MeshLambertMaterial({color:0x5555555//wireframe: true\n//flatShading: false,\n//emissive: 0x3399ff\n});//load Brain into directory\nfunction loadedBrain(brain,scene){brain.traverse(function(node){if(node.isMesh)node.material=testMat;});var scaleFac=0.01;brain.scale.set(scaleFac,scaleFac,scaleFac);brain.rotateY(4.5);brain.position.x=0;brain.position.y=-1;brain.position.z=0;brain.name=\"Brain\";scene.add(brain);}loader.load('./assets/Brain.obj',function(out){return loadedBrain(out,_this.scene);},function(xhr){console.log(xhr.loaded/xhr.total*100+\"% loaded\");},function(error){console.log(\"An error happened\"+error);});//this.composer.addPass(new EffectPass(this.camera, new GodRaysEffect(this.camera, this.raySphere)))\n};_this.startAnimationLoop=function(){// this.cube.rotation.x += 0.01;\n// this.cube.rotation.y += 0.01;\n_this.updateCamera();_this.renderer.render(_this.scene,_this.camera);_this.requestID=window.requestAnimationFrame(_this.startAnimationLoop);};_this.updateCamera=function(){//console.log(this.state.targetPOV);\nvar targetPos=_this.state.targetPOV;;var lookAtCoord=_this.state.lookAtPoint;// Right now this only runs once?\n_this.camera.position.lerp(targetPos,0.08);_this.camera.lookAt(lookAtCoord);};_this.state={targetPOV:new Vector3(0,0,8),lookAtPoint:new Vector3(0,0,0),height:0,width:0,animationCalled:false,tanFOV:Math.tan(Math.PI/180*120/2),//55 here is the camera's FOV remember this\nogWinHeight:window.innerHeight,ogWinWidth:window.innerWidth};return _this;}_createClass(ThreeDBrainBG,[{key:\"componentDidMount\",value:function componentDidMount(){this.sceneSetup();this.populateScene();this.startAnimationLoop();window.addEventListener('resize',this.handleWindowResize);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){window.removeEventListener(\"resize\",this.handleWindowResize);window.cancelAnimationFrame(this.requestID);}},{key:\"render\",value://Write event when user scrolls to certain points on the scrollbar. Have certain waypoints that\n//trigger specific camera movements at that point.\nfunction render(){var _this2=this;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"ThreeScene\",ref:function ref(_ref){return _this2.el=_ref;},children:/*#__PURE__*/_jsx(\"div\",{className:\"blur-on\"})}),\");\"]});}}]);return ThreeDBrainBG;}(Component);export default ThreeDBrainBG;","map":{"version":3,"sources":["C:/Users/strie/Documents/GitHub/uwsynaptech-website/synaptech-page/src/Components/OurTeam_Background.js"],"names":["React","Component","THREE","OBJLoader","Vector3","BloomEffect","EffectComposer","EffectPass","RenderPass","ThreeDBrainBG","props","handleWindowResize","setState","width","el","clientWidth","height","clientHeight","camera","aspect","state","fov","Math","min","PI","atan","tanFOV","ogWinWidth","ogWinHeight","updateProjectionMatrix","renderer","setSize","reshapeTex","scene","background","tex","reference","canvasAspect","imageAspect","image","offset","x","repeat","y","sceneSetup","Scene","PerspectiveCamera","z","WebGLRenderer","powerPreference","antialias","stencil","depth","composer","addPass","appendChild","domElement","applyTex","loader","TextureLoader","load","texture","raycaster","Raycaster","populateScene","light","AmbientLight","position","set","add","light2","DirectionalLight","light3","rayLight","PointLight","testMat","MeshLambertMaterial","color","loadedBrain","brain","traverse","node","isMesh","material","scaleFac","scale","rotateY","name","out","xhr","console","log","loaded","total","error","startAnimationLoop","updateCamera","render","requestID","window","requestAnimationFrame","targetPos","targetPOV","lookAtCoord","lookAtPoint","lerp","lookAt","animationCalled","tan","innerHeight","innerWidth","addEventListener","removeEventListener","cancelAnimationFrame","ref"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport * as THREE from 'three';\r\nimport { OBJLoader } from 'three/examples/jsm/loaders/OBJLoader.js';\r\nimport '../styles/Styles.css';\r\nimport { Vector3 } from \"three\";\r\nimport { BloomEffect, EffectComposer, EffectPass, RenderPass } from \"postprocessing\";\r\n\r\nclass ThreeDBrainBG extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n                targetPOV : (new Vector3(0, 0, 8)),\r\n                lookAtPoint : (new Vector3(0, 0, 0)),\r\n                height : 0,\r\n                width : 0,\r\n                animationCalled : false,\r\n                tanFOV : Math.tan( ( ( Math.PI / 180 ) * 120 / 2 ) ), //55 here is the camera's FOV remember this\r\n                ogWinHeight : window.innerHeight,\r\n                ogWinWidth : window.innerWidth,\r\n              };\r\n  };\r\n\r\n  componentDidMount() {\r\n      this.sceneSetup();\r\n      this.populateScene();\r\n      this.startAnimationLoop();\r\n      window.addEventListener('resize', this.handleWindowResize);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"resize\", this.handleWindowResize);\r\n    window.cancelAnimationFrame(this.requestID);\r\n  }\r\n\r\n  handleWindowResize = () => {\r\n    this.setState({\r\n      width : this.el.clientWidth,\r\n      height : this.el.clientHeight\r\n    });\r\n    this.camera.aspect = this.state.width / this.state.height;\r\n    this.camera.fov = Math.min(50, ( 360 / Math.PI ) * Math.atan( this.state.tanFOV * ( this.state.ogWinWidth / this.state.ogWinHeight ) / ( this.el.clientWidth / this.state.ogWinWidth )));\r\n    this.camera.updateProjectionMatrix();\r\n    this.renderer.setSize( this.state.width, this.state.height );\r\n    this.reshapeTex(this.scene.background, this);\r\n    // console.log(this.props.thresholds);\r\n  };\r\n\r\n  reshapeTex = (tex, reference) => {\r\n    const canvasAspect = reference.camera.aspect;\r\n    const imageAspect = tex.image ? tex.image.width / tex.image.height : 1;\r\n    const aspect = imageAspect / canvasAspect;\r\n\r\n    tex.offset.x = aspect > 1 ? (1 - 1 / aspect) / 2 : 0;\r\n    tex.repeat.x = aspect > 1 ? 1 / aspect : 1;\r\n\r\n    tex.offset.y = aspect > 1 ? 0 : (1 - aspect) / 2;\r\n    tex.repeat.y = aspect > 1 ? 1 : aspect;\r\n  }\r\n\r\n  sceneSetup = () => {\r\n    // get container dimensions and use them for scene sizing\r\n    const width = this.el.clientWidth;\r\n    const height = this.el.clientHeight;\r\n    this.setState({\r\n      width : width,\r\n      height : width\r\n    });\r\n    this.scene = new THREE.Scene();\r\n    this.camera = new THREE.PerspectiveCamera(\r\n        Math.min(50, ( 360 / Math.PI ) * Math.atan( this.state.tanFOV * ( this.state.ogWinWidth / this.state.ogWinHeight ) / ( this.state.width / this.state.ogWinWidth ))), // fov = field of view\r\n        width / height, // aspect ratio\r\n        0.1, // near plane\r\n        10 // far plane\r\n    );\r\n\r\n    // default camera position\r\n\r\n    this.camera.z = 3;\r\n    this.camera.y = 1;\r\n    this.renderer = new THREE.WebGLRenderer({\r\n      powerPreference: \"high-performance\",\r\n      antialias: false,\r\n      stencil: false,\r\n      depth: true\r\n      });\r\n    this.renderer.setSize( width, height );\r\n    this.composer = new EffectComposer(this.renderer);\r\n    this.composer.addPass(new RenderPass(this.scene, this.camera));\r\n    this.el.appendChild( this.renderer.domElement ); // mount using React ref\r\n\r\n    //Load background texture\r\n    function applyTex(tex, reference) {\r\n      reference.reshapeTex(tex, reference);\r\n      reference.scene.background = tex;\r\n    };\r\n\r\n    const loader = new THREE.TextureLoader();\r\n    loader.load('./assets/background_without_logo.png' ,\r\n    (texture) => applyTex(texture, this));\r\n    this.raycaster = new THREE.Raycaster();\r\n\r\n  };\r\n\r\n\r\n  populateScene  = () => {\r\n    const light = new THREE.AmbientLight(0x0E62AB, 2);\r\n    light.position.set(0, -4, 0);\r\n    this.scene.add(light);\r\n    const light2 = new THREE.DirectionalLight(0x5599ff, 2);\r\n    light2.position.set(0, 2, 0);\r\n    this.scene.add(light2);\r\n    const light3 = new THREE.DirectionalLight(0x5599ff, 2);\r\n    light3.position.set(2, 0, 0);\r\n    this.scene.add(light3);\r\n    this.rayLight = new THREE.PointLight(0xFFFF00, 0, 0.2, 1.5);\r\n    this.rayLight.position.set(0, 0, 0);\r\n    this.scene.add(this.rayLight);\r\n\r\n    // const raySphereGeo = new THREE.SphereBufferGeometry( 1/20, 16, 16 );\r\n    // const raySphereMat = new THREE.MeshBasicMaterial( { color: 0xffffff } );\r\n    // this.raySphere = new THREE.Mesh(raySphereGeo, raySphereMat);\r\n    // this.raySphere.layers.set( 0 );\r\n    // this.raySphere.position.set(0, 0, 0);\r\n    // this.scene.add( this.raySphere );\r\n    this.composer.addPass(new EffectPass(this.camera, new BloomEffect({\r\n      //camera : this.camera,\r\n      //lightSource : this.rayLight.position\r\n    })));\r\n\r\n    //Load brain object file\r\n    var loader = new OBJLoader();\r\n\r\n    //Create material for object\r\n    const testMat = new THREE.MeshLambertMaterial({\r\n      color: 0x5555555,\r\n      //wireframe: true\r\n      //flatShading: false,\r\n      //emissive: 0x3399ff\r\n      });\r\n\r\n    //load Brain into directory\r\n    function loadedBrain( brain, scene) {\r\n      brain.traverse((node) => {\r\n        if(node.isMesh) node.material = testMat;\r\n      });\r\n      const scaleFac = 0.01;\r\n      brain.scale.set(scaleFac, scaleFac, scaleFac);\r\n      brain.rotateY(4.5)\r\n      brain.position.x = 0;\r\n      brain.position.y = -1;\r\n      brain.position.z = 0;\r\n      brain.name = \"Brain\"\r\n      scene.add(brain);\r\n    }\r\n\r\n    loader.load('./assets/Brain.obj',\r\n      (out) => loadedBrain( out, this.scene ),\r\n      function(xhr) {\r\n        console.log((xhr.loaded / xhr.total) * 100 + \"% loaded\");\r\n      },\r\n      function(error) {\r\n        console.log(\"An error happened\" + error);\r\n      }\r\n    );\r\n    //this.composer.addPass(new EffectPass(this.camera, new GodRaysEffect(this.camera, this.raySphere)))\r\n  };\r\n\r\n\r\n  startAnimationLoop = () => {\r\n    // this.cube.rotation.x += 0.01;\r\n    // this.cube.rotation.y += 0.01;\r\n    this.updateCamera();\r\n    this.renderer.render( this.scene, this.camera );\r\n    this.requestID = window.requestAnimationFrame(this.startAnimationLoop);\r\n  };\r\n\r\n  updateCamera = () => {\r\n    //console.log(this.state.targetPOV);\r\n    const targetPos = this.state.targetPOV;;\r\n    const lookAtCoord = this.state.lookAtPoint;\r\n\r\n    // Right now this only runs once?\r\n    this.camera.position.lerp(targetPos, 0.08);\r\n    this.camera.lookAt(lookAtCoord);\r\n  }\r\n\r\n  //Write event when user scrolls to certain points on the scrollbar. Have certain waypoints that\r\n  //trigger specific camera movements at that point.\r\n\r\n  render() {\r\n      return(\r\n        <>\r\n          <div className = \"ThreeScene\" ref={ref => (this.el = ref)}>\r\n            <div className ={\"blur-on\"}>\r\n            </div>\r\n          </div>);\r\n        </>\r\n      );\r\n  }\r\n}\r\nexport default ThreeDBrainBG;"]},"metadata":{},"sourceType":"module"}